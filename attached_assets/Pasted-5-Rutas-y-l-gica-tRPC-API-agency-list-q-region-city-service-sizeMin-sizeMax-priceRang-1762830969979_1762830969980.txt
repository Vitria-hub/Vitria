5) Rutas y lógica (tRPC + API)
	•	agency.list({q, region, city, service, sizeMin, sizeMax, priceRange, sort, page})
	•	Usa Postgres FTS en name + description; filtros por columnas e índices; sort por avg_rating, reviews_count, is_premium, created_at.
	•	agency.getBySlug({slug})
	•	agency.create/update (auth: owner)
	•	review.create({agencyId, rating, comment}) → status='pending'
	•	review.reply({reviewId, text}) (opcional, guarda en tabla aparte si lo implementas)
	•	sponsor.listHome() (retorna patrocinados vigentes ordenados por position)
	•	metrics.track({agencyId, event}) → upsert en agency_metrics_daily
	•	billing.createCheckoutSession({plan}) → Stripe
	•	billing.webhookStripe en /api/stripe/webhook:
	•	checkout.session.completed → crear subscriptions, marcar is_premium=true, set premium_until.
	•	invoice.payment_failed o cancelación → actualizar status y desactivar premium al expirar.

6) Páginas y componentes (implementación mínima)
	•	Home: Hero (título, subtítulo), SearchBar con filtros, CarouselSponsored, categorías, testimonios placeholder, CTAs “Buscar agencias” y “Registrar mi agencia”. Estilo: texto en primary, CTA primary con hover accent, estrellas accent.
	•	Listado: grid de AgencyCard con paginación; FilterBar (tipo, ubicación, servicios, tamaño, rango de precio, orden).
	•	Ficha: header con logo/cover, badges Premium y Verificada, secciones: descripción, servicios, PortfolioGrid, clientes destacados, reseñas (ReviewForm si logueado), botón “Contactar Agencia” → modal con form (guarda lead y suma métrica leads).
	•	Dashboard: edición de perfil (logo/cover via Supabase Storage), métricas (views, contact_clicks, leads por día), gestión de reseñas (ver, responder), suscripción (upgrade/downgrade).
	•	Blog: list + detail básico (MDX o tabla posts opcional).
	•	Navbar/Footer: navegación principal y footer con Términos, Privacidad, FAQ, redes.

7) Autenticación
	•	Supabase Auth: Email + Magic Link; opcionales Google/LinkedIn.
	•	Onboarding: si usuario elige “Soy agencia”, crea registro en agencies con owner_id y slug único.

8) SEO
	•	next-seo para metas globales; next-sitemap para sitemap.xml y robots.txt.
	•	Schema.org en fichas: Organization + AggregateRating cuando reviews_count>0.

9) Archivos a crear (plantillas clave)
/components/Button.tsx